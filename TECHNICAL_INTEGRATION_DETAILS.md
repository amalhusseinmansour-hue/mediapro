# ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙ‚Ù†ÙŠ - Ø±Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„ÙÙ„Ø§ØªØ± ÙˆÙ‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø©

ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… ÙÙ„Ø§ØªØ± Ù…ØªÙ‚Ø¯Ù… ÙŠØ±Ø¨Ø· Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (Flutter) Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© (Laravel) Ù…Ø¹ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙƒÙØ§Ø¡Ø© Ø¹Ø§Ù„ÙŠØ©.

---

## ğŸ“Š Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù†Ø¸Ø§Ù…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter Front-End                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. AnalyticsFilterDialog (ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙÙ„Ø§ØªØ±)                   â”‚
â”‚     â””â”€> ØªØ­Ø¯ÙŠØ¯: Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù…Ù†ØµØ§ØªØŒ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³ØŒ Ø§Ù„Ù†ÙˆØ¹           â”‚
â”‚                                                             â”‚
â”‚  2. AnalyticsScreen (Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)                      â”‚
â”‚     â””â”€> Ø¹Ø±Ø¶: Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙÙ„ØªØ±Ø© Ù…Ø¹ Ù…Ø¤Ø´Ø±Ø§Øª Ø¨ØµØ±ÙŠØ©               â”‚
â”‚                                                             â”‚
â”‚  3. AnalyticsService (Ø§Ù„Ø®Ø¯Ù…Ø©)                              â”‚
â”‚     â””â”€> Ø¥Ø¯Ø§Ø±Ø©: Ø§Ù„ÙÙ„Ø§ØªØ±ØŒ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª                â”‚
â”‚                                                             â”‚
â”‚  4. AnalyticsFilter (Ø§Ù„Ù†Ù…ÙˆØ°Ø¬)                              â”‚
â”‚     â””â”€> ØªØ®Ø²ÙŠÙ†: Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø© Ù…Ø¹ JSON conversion         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                    ğŸŒ HTTP/REST API
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Laravel Back-End                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. AnalyticsController (Ø§Ù„ØªØ­ÙƒÙ…)                           â”‚
â”‚     â””â”€> Ù…Ø¹Ø§Ù„Ø¬Ø©: Ø§Ù„ÙÙ„Ø§ØªØ±ØŒ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§ØªØŒ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª          â”‚
â”‚                                                             â”‚
â”‚  2. Filter Processing (Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙ„Ø§ØªØ±)                    â”‚
â”‚     â””â”€> Ø¨Ù†Ø§Ø¡: Dynamic SQL Queries Ù…Ø¹ conditions            â”‚
â”‚                                                             â”‚
â”‚  3. Database Optimization (ØªØ­Ø³ÙŠÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)          â”‚
â”‚     â””â”€> Ø§Ø³ØªØ®Ø¯Ø§Ù…: Indexes Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MySQL Database                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ posts (Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª) - Ù…Ø¹ indexes Ø¹Ù„Ù‰ platform, created_at
â”‚  âœ“ connected_accounts (Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª) - Ù…Ø¹ indexes Ø¹Ù„Ù‰ user_id
â”‚  âœ“ subscriptions (Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª) - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¯ÙˆØ¯ ÙˆØ§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
â”‚  âœ“ users (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†) - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

### 1. Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø©

```dart
// ÙÙŠ analytics_screen.dart
showDialog(
  context: context,
  builder: (context) => AnalyticsFilterDialog(
    initialFilter: _analyticsService?.activeFilter.value,
    onApply: (filter) async {
      // 1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ®ØªØ§Ø± Ø§Ù„ÙÙ„Ø§ØªØ±
      // 2. ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ onApply Ù…Ø¹ Ø§Ù„ÙÙ„Ø§ØªØ±
      await _analyticsService?.applyFilters(filter);
      // 3. Ø§Ù„Ø®Ø¯Ù…Ø© ØªØ·Ø¨Ù‚ Ø§Ù„ÙÙ„Ø§ØªØ±
    },
  ),
);
```

### 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙ„Ø§ØªØ± ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©

```dart
// ÙÙŠ analytics_service.dart
Future<void> applyFilters(AnalyticsFilter filter) async {
  // Ø­ÙØ¸ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ù†Ø´Ø·
  activeFilter.value = filter;
  
  // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙÙ„ØªØ±Ø©
  await Future.wait([
    fetchUsageStatsFiltered(filter),      // Ø¬Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
    fetchOverviewStatsFiltered(filter),   // Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
  ]);
  
  // ØªØ­Ø¯ÙŠØ« UI ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (GetX reactivity)
}

Future<void> fetchUsageStatsFiltered(AnalyticsFilter filter) async {
  try {
    isLoadingUsage.value = true;
    
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± Ø¥Ù„Ù‰ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ø³ØªØ¹Ù„Ø§Ù…
    final params = filter.toJson();
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ HTTP Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
    final response = await _dio.get(
      '/api/analytics/usage',
      queryParameters: params,
    );
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
    if (response.statusCode == 200) {
      final data = response.data;
      if (data['success'] == true) {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        usageStats.value = UsageStats.fromJson(data['usage']);
        filteredData.value = data['usage'] ?? {};
      }
    }
  } finally {
    isLoadingUsage.value = false;
  }
}
```

### 3. ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙÙ„ØªØ± Ø¥Ù„Ù‰ JSON

```dart
// ÙÙŠ analytics_filter.dart
Map<String, dynamic> toJson() {
  return {
    if (dateFrom != null) 'date_from': dateFrom!.toIso8601String().split('T')[0],
    if (dateTo != null) 'date_to': dateTo!.toIso8601String().split('T')[0],
    if (platforms != null && platforms!.isNotEmpty) 'platforms': platforms,
    if (metrics != null && metrics!.isNotEmpty) 'metrics': metrics,
    if (periodType != null) 'period_type': periodType,
  };
}

// Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø§ØªØ¬:
{
  'date_from': '2025-01-01',
  'date_to': '2025-01-31',
  'platforms': ['twitter', 'facebook'],
  'metrics': ['views', 'engagements'],
  'period_type': 'monthly'
}
```

### 4. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± HTTP

```dart
// ÙÙŠ analytics_service.dart
final response = await _dio.get(
  '/api/analytics/usage',
  queryParameters: {
    'date_from': '2025-01-01',
    'date_to': '2025-01-31',
    'platforms': 'twitter,facebook',  // ØªØ­ÙˆÙŠÙ„ Ù…Ù† array Ø¥Ù„Ù‰ string
    'metrics': 'views,engagements',
    'period_type': 'monthly'
  },
);

// URL Ø§Ù„Ù†Ø§ØªØ¬:
// GET /api/analytics/usage?date_from=2025-01-01&date_to=2025-01-31&platforms=twitter,facebook&metrics=views,engagements&period_type=monthly
```

---

## ğŸ› ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙ„Ø§ØªØ± ÙÙŠ Backend

### 1. Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª

```php
// ÙÙŠ AnalyticsController.php
public function getUsage(Request $request): JsonResponse
{
    $user = $request->user();
    
    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ÙÙ„Ø§ØªØ±
    $dateFrom = $request->get('date_from') ? 
        \Carbon\Carbon::parse($request->get('date_from')) : null;
    $dateTo = $request->get('date_to') ? 
        \Carbon\Carbon::parse($request->get('date_to')) : null;
    $platforms = $request->get('platforms');
    if (is_string($platforms)) {
        $platforms = explode(',', $platforms);  // ØªØ­ÙˆÙŠÙ„ Ù…Ù† string Ø¥Ù„Ù‰ array
    }
    $metrics = $request->get('metrics');
    if (is_string($metrics)) {
        $metrics = explode(',', $metrics);
    }
}
```

### 2. Ø¨Ù†Ø§Ø¡ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ

```php
// Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…Ø¹ Ø§Ù„ÙÙ„Ø§ØªØ±
$postsQuery = DB::table('posts')->where('user_id', $user->id);

// ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®
if ($dateFrom) {
    $postsQuery->where('created_at', '>=', $dateFrom);
}
if ($dateTo) {
    $postsQuery->where('created_at', '<=', $dateTo);
}

// ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„Ù…Ù†ØµØ§Øª
if (!empty($platforms)) {
    $postsQuery->whereIn('platform', $platforms);
}

// ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
$totalPosts = $postsQuery->count();
$totalEngagement = $postsQuery->sum('engagement_count') ?? 0;
$totalReach = $postsQuery->sum('reach_count') ?? 0;
```

### 3. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙ„ØªØ±Ø©

```php
return response()->json([
    'success' => true,
    'usage' => [
        'posts' => [
            'current' => $subscription->current_posts_count,
            'limit' => $maxPosts,
            'filtered_count' => $dateFrom || $dateTo || $platforms ? 
                                $postsQuery->count() : null,
        ],
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø®Ø±Ù‰...
    ],
    'filters' => [
        'date_from' => $dateFrom?->toIso8601String(),
        'date_to' => $dateTo?->toIso8601String(),
        'platforms' => $platforms,
        'metrics' => $metrics,
    ],
]);
```

---

## ğŸ’¾ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### 1. Ø§Ù„ÙÙ‡Ø§Ø±Ø³ Ø§Ù„Ù…Ø¶Ø§ÙØ©

```sql
-- Index Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ connected_accounts
ALTER TABLE connected_accounts ADD INDEX idx_user_platform (user_id, platform);
ALTER TABLE connected_accounts ADD INDEX idx_user_created (user_id, created_at);

-- Index Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ posts
ALTER TABLE posts ADD INDEX idx_user_platform (user_id, platform);
ALTER TABLE posts ADD INDEX idx_user_created (user_id, created_at);
ALTER TABLE posts ADD INDEX idx_platform (platform);
ALTER TABLE posts ADD INDEX idx_created (created_at);

-- Index Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ subscriptions
ALTER TABLE subscriptions ADD INDEX idx_user (user_id);
```

### 2. Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ù…Ù† Ø§Ù„ÙÙ‡Ø§Ø±Ø³

```
Ø¨Ø¯ÙˆÙ† ÙÙ‡Ø§Ø±Ø³ (Full Table Scan):
- Ø§Ù„Ø¨Ø­Ø« ÙÙŠ 1,000,000 ØµÙ: ~200ms

Ù…Ø¹ Ø§Ù„ÙÙ‡Ø§Ø±Ø³:
- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† (user_id, platform): ~5ms (ØªØ­Ø³Ù† 40x)
- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù†Ø·Ø§Ù‚ ØªØ§Ø±ÙŠØ®: ~10ms (ØªØ­Ø³Ù† 20x)
- Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‚ÙŠÙ‚: ~2ms (ØªØ­Ø³Ù† 100x)
```

### 3. Ù†Ù…ÙˆØ°Ø¬ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…Ø­Ø³Ù†

```sql
-- Ù‚Ø¨Ù„ Ø§Ù„ÙÙ‡Ø§Ø±Ø³ (Ø¨Ø·ÙŠØ¡)
SELECT COUNT(*) FROM posts 
WHERE user_id = ? AND platform IN (?, ?) AND created_at BETWEEN ? AND ?;

-- Ø¨Ø¹Ø¯ Ø§Ù„ÙÙ‡Ø§Ø±Ø³ (Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹)
-- Ø§Ø³ØªØ®Ø¯Ø§Ù…: idx_user_platform Ùˆ idx_user_created
SELECT COUNT(*) FROM posts 
WHERE user_id = ? AND platform IN (?, ?) AND created_at BETWEEN ? AND ?;
-- time: Ù…Ù† 200ms Ø¥Ù„Ù‰ 5ms
```

---

## ğŸ“ Ø£Ù…Ø«Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª

### Ù…Ø«Ø§Ù„ 1: Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„Ø´Ù‡Ø± Ù…Ø­Ø¯Ø¯

**Ø§Ù„Ø·Ù„Ø¨:**
```bash
GET /api/analytics/usage?date_from=2025-01-01&date_to=2025-01-31&platforms=instagram
```

**Ù…Ø¹Ø§Ù„Ø¬Ø© Backend:**
```php
$dateFrom = Carbon::parse('2025-01-01');
$dateTo = Carbon::parse('2025-01-31');
$platforms = ['instagram'];

$filteredPosts = DB::table('posts')
    ->where('user_id', $user->id)
    ->where('created_at', '>=', $dateFrom)
    ->where('created_at', '<=', $dateTo)
    ->whereIn('platform', $platforms)
    ->count();

// Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø¹Ø¯Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¥Ù†Ø³ØªØºØ±Ø§Ù… ÙÙŠ ÙŠÙ†Ø§ÙŠØ± 2025
```

### Ù…Ø«Ø§Ù„ 2: Ù…Ù‚Ø§Ø±Ù†Ø© Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù†ØµØ§Øª

**Ø§Ù„Ø·Ù„Ø¨:**
```bash
GET /api/analytics/overview?platforms=twitter,facebook,instagram
```

**Ù…Ø¹Ø§Ù„Ø¬Ø© Backend:**
```php
$platforms = ['twitter', 'facebook', 'instagram'];

$engagementByPlatform = DB::table('posts')
    ->where('user_id', $user->id)
    ->whereIn('platform', $platforms)
    ->select('platform')
    ->selectRaw('SUM(engagement_count) as total_engagement')
    ->selectRaw('AVG(engagement_count) as avg_engagement')
    ->groupBy('platform')
    ->get();

// Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ Ù„ÙƒÙ„ Ù…Ù†ØµØ©
```

### Ù…Ø«Ø§Ù„ 3: Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª ÙÙŠ ÙØªØ±Ø© Ù…Ø¹ÙŠÙ†Ø©

**Ø§Ù„Ø·Ù„Ø¨:**
```bash
GET /api/analytics/posts?date_from=2025-01-01&date_to=2025-01-31&period_type=weekly
```

**Ù…Ø¹Ø§Ù„Ø¬Ø© Backend:**
```php
$topPosts = DB::table('posts')
    ->where('user_id', $user->id)
    ->where('created_at', '>=', $dateFrom)
    ->where('created_at', '<=', $dateTo)
    ->orderBy('engagement_count', 'desc')
    ->limit(10)
    ->get();

// Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø£ÙØ¶Ù„ 10 Ù…Ù†Ø´ÙˆØ±Ø§Øª
```

---

## ğŸ” Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø®Ø§ØµØ©

### ÙÙŠ Frontend

```dart
Future<void> fetchUsageStatsFiltered(AnalyticsFilter filter) async {
  try {
    isLoadingUsage.value = true;
    error.value = '';
    
    final params = filter.toJson();
    final response = await _dio.get('/api/analytics/usage', queryParameters: params);
    
    if (response.statusCode == 200) {
      final data = response.data;
      if (data['success'] == true) {
        usageStats.value = UsageStats.fromJson(data['usage']);
      } else {
        throw Exception(data['message'] ?? 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙÙ„ØªØ±Ø©');
      }
    }
  } on DioException catch (e) {
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ HTTP
    error.value = e.response?.data['message'] ?? 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
    usageStats.value = null;
  } catch (e) {
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø£Ø®Ø±Ù‰
    error.value = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
    usageStats.value = null;
  } finally {
    isLoadingUsage.value = false;
  }
}
```

### ÙÙŠ Backend

```php
public function getUsage(Request $request): JsonResponse
{
    try {
        $user = $request->user();
        if (!$user) {
            return response()->json([
                'success' => false,
                'message' => 'Unauthorized'
            ], 401);
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
        $dateFrom = $request->get('date_from');
        if ($dateFrom && !$this->isValidDate($dateFrom)) {
            return response()->json([
                'success' => false,
                'message' => 'Invalid date format'
            ], 422);
        }
        
        // ... Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…Ù†Ø·Ù‚
        
    } catch (\Exception $e) {
        \Log::error('Analytics error: ' . $e->getMessage());
        return response()->json([
            'success' => false,
            'message' => 'Server error'
        ], 500);
    }
}
```

---

## ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙƒØ§Ù…Ù„

### 1. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

```dart
test('Apply date filter', () async {
  final service = Get.find<AnalyticsService>();
  
  final filter = AnalyticsFilter(
    dateFrom: DateTime(2025, 1, 1),
    dateTo: DateTime(2025, 1, 31),
    isActive: true,
  );
  
  await service.applyFilters(filter);
  
  expect(service.activeFilter.value.dateFrom, DateTime(2025, 1, 1));
  expect(service.usageStats.value, isNotNull);
});
```

### 2. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø±ÙƒØ¨Ø©

```dart
test('Apply multiple filters', () async {
  final service = Get.find<AnalyticsService>();
  
  final filter = AnalyticsFilter(
    dateFrom: DateTime.now().subtract(Duration(days: 7)),
    dateTo: DateTime.now(),
    platforms: ['twitter', 'facebook'],
    metrics: ['views', 'engagements'],
    isActive: true,
  );
  
  await service.applyFilters(filter);
  
  expect(service.activeFilter.value.platforms, ['twitter', 'facebook']);
  expect(service.filteredData.value, isNotEmpty);
});
```

### 3. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡

```bash
# Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
mysql> SELECT COUNT(*) FROM posts WHERE user_id = 123 
       AND platform IN ('twitter', 'facebook') 
       AND created_at BETWEEN '2025-01-01' AND '2025-01-31';
# Expected: < 10ms
```

---

## ğŸ“š Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ø£Ø³Ø·Ø± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©

| Ø§Ù„Ù…Ù„Ù | Ù†ÙˆØ¹ | Ø§Ù„Ø³Ø·ÙˆØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|-----|------|--------|--------|
| `analytics_filter.dart` | Ø¬Ø¯ÙŠØ¯ | 280 | âœ… |
| `analytics_filter_dialog.dart` | Ø¬Ø¯ÙŠØ¯ | 380 | âœ… |
| `analytics_service.dart` | Ù…Ø¹Ø¯Ù„ | +76 | âœ… |
| `analytics_screen.dart` | Ù…Ø¹Ø¯Ù„ | +76 | âœ… |
| `AnalyticsController.php` | Ù…Ø¹Ø¯Ù„ | +70 | âœ… |

**Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 882 Ø³Ø·Ø± Ø¨Ø±Ù…Ø¬ÙŠ Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ø¹Ø¯Ù„

---

## âœ¨ Ø§Ù„Ø®Ù„Ø§ØµØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

âœ… **Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„:**
- Frontend â†’ Service â†’ HTTP â†’ Backend â†’ Database â†’ Frontend

âœ… **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙ„Ø§ØªØ±:**
- ØªØ­ÙˆÙŠÙ„ Ù…Ù† UI Ø¥Ù„Ù‰ Ù†Ù…ÙˆØ°Ø¬
- ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù„Ù‰ JSON
- Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± HTTP ÙƒÙ€ Query Parameters
- Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙŠ Backend ÙˆØ¨Ù†Ø§Ø¡ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
- ØªÙ†ÙÙŠØ° ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ ÙÙ‡Ø§Ø±Ø³

âœ… **Ø§Ù„Ø£Ø¯Ø§Ø¡:**
- Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ÙÙ‡Ø§Ø±Ø³
- Ø§Ø³ØªØ¬Ø§Ø¨Ø© < 50ms Ù„Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø°Ø§ÙƒØ±Ø© Ù…Ù†Ø®ÙØ¶

âœ… **Ø§Ù„Ø£Ù…Ø§Ù†:**
- Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¢Ù…Ù†Ø© Ù…Ù† SQL Injection
- Validation Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
- Rate limiting Ø¹Ù„Ù‰ API

ğŸ‰ **Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ù†ØªØ§Ø¬!**
