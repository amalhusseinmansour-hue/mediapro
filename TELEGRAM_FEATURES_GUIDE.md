# ุฏููู ููุฒุงุช ุงูุชููุฌุฑุงู ุงูุฌุฏูุฏุฉ ๐ค

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุงูู ูุงุณุชุฎุฏุงู ุจูุชุงุช ุงูุชููุฌุฑุงู ูุชุญุณูู ูุชุดุบูู ุฎุตุงุฆุต ุงูุชุทุจูู. ุงููุธุงู ูููุฑ:

1. **ุฅุดุนุงุฑุงุช ููุฑูุฉ** ุนุจุฑ ุงูุชููุฌุฑุงู
2. **ุงููุดุฑ ุนูู ูููุงุช ููุฌููุนุงุช ุงูุชููุฌุฑุงู**
3. **ุฅุฏุงุฑุฉ ุชูุงุนููุฉ** ูู ุฎูุงู ุงูุจูุชุงุช
4. **ุชูุงุฑูุฑ ุชููุงุฆูุฉ** ููููุฉ ูุฃุณุจูุนูุฉ

---

## ุงููููุงุช ุงููุถุงูุฉ

### 1. ุฎุฏูุฉ ุจูุชุงุช ุงูุชููุฌุฑุงู
**ุงูููู**: `lib/services/telegram_bot_service.dart`

ุฎุฏูุฉ ุดุงููุฉ ููุชุนุงูู ูุน Telegram Bot APIุ ุชููุฑ:

#### ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:

- โ **ุฅุฑุณุงู ุฑุณุงุฆู ูุตูุฉ** (`sendMessage`)
- โ **ุฅุฑุณุงู ุตูุฑ ูุน ูุต** (`sendPhoto`)
- โ **ุฅุฑุณุงู ูุณุชูุฏุงุช** (`sendDocument`)
- โ **ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุจูุช** (`getBotInfo`)
- โ **ุฅุดุนุงุฑุงุช ููุณูุฉ** (ูุฌุงุญุ ุฎุทุฃุ ุชุญุฐูุฑ)
- โ **ุชูุงุฑูุฑ ุฅุญุตุงุฆูุงุช** (`sendAnalyticsReport`)
- โ **ุชูุจููุงุช ุงุดุชุฑุงู** (`sendSubscriptionAlert`)
- โ **ุงููุดุฑ ุนูู ุงููููุงุช** (`publishToTelegram`)
- โ **ุงูุญุตูู ุนูู ุงูุชุญุฏูุซุงุช** (`getUpdates`)
- โ **ุถุจุท Webhooks** (`setWebhook`)
- โ **ุฃุฒุฑุงุฑ ุชูุงุนููุฉ** (`sendMessageWithButtons`)

#### ูุซุงู ุงูุงุณุชุฎุฏุงู:

```dart
final botService = Get.find<TelegramBotService>();

// ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฌุงุญ
await botService.sendSuccessNotification(
  botToken: 'YOUR_BOT_TOKEN',
  chatId: 'CHAT_ID',
  title: 'ูุดุฑ ูุงุฌุญ',
  message: 'ุชู ูุดุฑ ุงูููุดูุฑ ุจูุฌุงุญ ุนูู Facebook',
);

// ุงููุดุฑ ุนูู ููุงุฉ ุชููุฌุฑุงู
await botService.publishToTelegram(
  botToken: 'YOUR_BOT_TOKEN',
  channelUsername: 'your_channel',
  content: 'ูุญุชูู ุงูููุดูุฑ',
  imageUrl: 'https://example.com/image.jpg',
  hashtags: ['ุชุณููู', 'ุฅุนูุงูุงุช'],
);
```

---

### 2. ุฎุฏูุฉ ุงูุฅุดุนุงุฑุงุช ุงูุฐููุฉ
**ุงูููู**: `lib/services/telegram_notification_service.dart`

ุชุฏูุฑ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ ูููุณุชุฎุฏู ุนุจุฑ ุจูุชุงุช ุงูุชููุฌุฑุงู ุงููุฑุจูุทุฉ.

#### ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงููุชุงุญุฉ:

| ุงูููุน | ุงูุฏุงูุฉ | ุงููุตู |
|------|--------|-------|
| ๐ ููุดูุฑุงุช | `notifyPostSuccess` | ุฅุดุนุงุฑ ุนูุฏ ูุฌุงุญ ุงููุดุฑ |
| โ ุฃุฎุทุงุก | `notifyPostFailure` | ุฅุดุนุงุฑ ุนูุฏ ูุดู ุงููุดุฑ |
| ๐ ุชุญูููุงุช | `sendDailyAnalyticsReport` | ุชูุฑูุฑ ูููู ุจุงูุฅุญุตุงุฆูุงุช |
| ๐ ุงุดุชุฑุงู | `notifySubscriptionExpiring` | ุชูุจูู ูุจู ุงูุชูุงุก ุงูุงุดุชุฑุงู |
| โ๏ธ ูุดุงูู | `notifyAccountIssue` | ุชูุจูู ุนูุฏ ูุดููุฉ ูู ุญุณุงุจ |
| ๐ซ ุญุฏูุฏ | `notifyLimitReached` | ุฅุดุนุงุฑ ุนูุฏ ุจููุบ ุงูุญุฏ ุงูุฃูุตู |
| ๐ ููุฎุตุงุช | `sendWeeklySummary` | ููุฎุต ุฃุณุจูุนู ุดุงูู |

#### ุงูุฅุนุฏุงุฏุงุช ุงููุชุงุญุฉ:

- `notificationsEnabled` - ุชูุนูู/ุชุนุทูู ุฌููุน ุงูุฅุดุนุงุฑุงุช
- `postNotifications` - ุฅุดุนุงุฑุงุช ุงูููุดูุฑุงุช
- `analyticsNotifications` - ุฅุดุนุงุฑุงุช ุงูุชุญูููุงุช ูุงูุชูุงุฑูุฑ
- `subscriptionNotifications` - ุฅุดุนุงุฑุงุช ุงูุงุดุชุฑุงู
- `errorNotifications` - ุฅุดุนุงุฑุงุช ุงูุฃุฎุทุงุก

#### ูุซุงู ุงูุงุณุชุฎุฏุงู:

```dart
final notificationService = Get.find<TelegramNotificationService>();

// ุชูุนูู ุงูุฅุดุนุงุฑุงุช
await notificationService.toggleNotifications(true);

// ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฌุงุญ ูุดุฑ
await notificationService.notifyPostSuccess(
  platform: 'Facebook',
  postTitle: 'ุนููุงู ุงูููุดูุฑ',
  postUrl: 'https://facebook.com/post/123',
);

// ุฅุฑุณุงู ุชูุฑูุฑ ูููู
await notificationService.sendDailyAnalyticsReport({
  'posts': 15,
  'views': 1250,
  'likes': 340,
  'comments': 89,
  'shares': 45,
  'engagement_rate': '8.5',
});
```

---

### 3. ุดุงุดุฉ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
**ุงูููู**: `lib/screens/telegram/telegram_notifications_settings_screen.dart`

ูุงุฌูุฉ ูุณุชุฎุฏู ุดุงููุฉ ูุฅุฏุงุฑุฉ ุฅุดุนุงุฑุงุช ุงูุชููุฌุฑุงู.

#### ุงููููุฒุงุช:

- โ **ุงุฎุชูุงุฑ ุงูุจูุช** ูู ุงูุจูุชุงุช ุงููุฑุจูุทุฉ
- โ **ุฅุฏุฎุงู Chat ID** ูุน ุฏููู ุงูุญุตูู ุนููู
- โ **ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ** ูุจู ุงูุญูุธ
- โ **ุงูุชุญูู ูู ุฃููุงุน ุงูุฅุดุนุงุฑุงุช** (ุชูุนูู/ุชุนุทูู ูู ููุน)
- โ **ุฏููู ูุจุณุท** ููุญุตูู ุนูู Chat ID ุนุจุฑ @userinfobot

#### ููููุฉ ุงููุตูู:

```dart
Get.to(() => const TelegramNotificationsSettingsScreen());
```

---

### 4. ุชุญุฏูุซุงุช API
**ุงูููู**: `lib/services/laravel_api_service.dart`

ุชู ุฅุถุงูุฉ methods ุฌุฏูุฏุฉ ููุชุนุงูู ูุน ุงูุชููุฌุฑุงู:

```dart
/// ุงููุดุฑ ุนูู ููุงุฉ ุชููุฌุฑุงู
Future<Map<String, dynamic>> publishToTelegram({
  required String botId,
  required String channelUsername,
  required String content,
  String? imageUrl,
  List<String>? hashtags,
});

/// ุงูุญุตูู ุนูู ูุนูููุงุช ุงูููุงุฉ
Future<Map<String, dynamic>?> getTelegramChannelInfo({
  required String botId,
  required String channelUsername,
});
```

---

## ููููุฉ ุงูุฅุนุฏุงุฏ

### ุงูุฎุทูุฉ 1: ุฑุจุท ุจูุช ุชููุฌุฑุงู

1. ุงูุชุญ `ุดุงุดุฉ ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช`
2. ุงุถุบุท ุนูู ุจุทุงูุฉ `ุจูุชุงุช ุชููุฌุฑุงู`
3. ุงูุฑุฃ ุงูุฏููู ุงูููุตู
4. ุฃูุดุฆ ุจูุช ุนุจุฑ @BotFather
5. ุงูุณุฎ Bot Token ู Username
6. ุฃุฏุฎููู ูู ุงูุชุทุจูู

### ุงูุฎุทูุฉ 2: ุชูุนูู ุงูุฅุดุนุงุฑุงุช

1. ุงูุชุญ `ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช`
2. ุงุฎุชุฑ ุงูุจูุช ุงููุฑุจูุท
3. ุงุญุตู ุนูู Chat ID ูู @userinfobot
4. ุฃุฏุฎู Chat ID
5. ุงุถุบุท `ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ`
6. ูุนูู ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงููุทููุจุฉ

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ุงูุจูุช ููุดุฑู

ููู ูุชููู ุงูุจูุช ูู ุงููุดุฑ ุนูู ููุงุชู:

1. ุงูุชุญ ููุงุชู ุนูู ุงูุชููุฌุฑุงู
2. ุงุฐูุจ ุฅูู ุฅุนุฏุงุฏุงุช ุงูููุงุฉ
3. ุงุถุบุท ุนูู "Administrators"
4. ุงุถุบุท "Add Admin"
5. ุงุจุญุซ ุนู ุงูุจูุช ุจุงูู Username
6. ุงููุญู ุตูุงุญูุงุช ุงููุดุฑ

---

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู ูู ุงูุชุทุจูู

### ูุซุงู 1: ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ูุดุฑ ููุดูุฑ

```dart
// ูู PostService ุฃู MultiPlatformPostService
final notificationService = Get.find<TelegramNotificationService>();

try {
  // ูุดุฑ ุงูููุดูุฑ...
  final result = await publishPost(post);

  if (result['success']) {
    // ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฌุงุญ
    await notificationService.notifyPostSuccess(
      platform: 'Facebook',
      postTitle: post.title,
      postUrl: result['post_url'],
    );
  }
} catch (e) {
  // ุฅุฑุณุงู ุฅุดุนุงุฑ ูุดู
  await notificationService.notifyPostFailure(
    platform: 'Facebook',
    postTitle: post.title,
    error: e.toString(),
  );
}
```

### ูุซุงู 2: ุงููุดุฑ ุนูู ููุงุฉ ุชููุฌุฑุงู

```dart
final laravelApi = Get.find<LaravelApiService>();

final result = await laravelApi.publishToTelegram(
  botId: 'bot_123',
  channelUsername: 'my_channel',
  content: 'ูุฐุง ููุดูุฑ ุฌุฏูุฏ ุนูู ููุงุชูุง!',
  imageUrl: 'https://example.com/image.jpg',
  hashtags: ['ุฌุฏูุฏ', 'ุชุญุฏูุซุงุช'],
);

if (result['success']) {
  print('ุชู ุงููุดุฑ ุจูุฌุงุญ!');
}
```

### ูุซุงู 3: ุชูุฑูุฑ ูููู ุชููุงุฆู

```dart
// ูู AnalyticsService ุฃู ูู Scheduled Job
Future<void> sendDailyReport() async {
  final stats = await getDailyStats();
  final notificationService = Get.find<TelegramNotificationService>();

  await notificationService.sendDailyAnalyticsReport({
    'posts': stats.totalPosts,
    'views': stats.totalViews,
    'likes': stats.totalLikes,
    'comments': stats.totalComments,
    'shares': stats.totalShares,
    'engagement_rate': stats.engagementRate.toStringAsFixed(1),
  });
}
```

---

## ูุชุทูุจุงุช Backend

ูุญุชุงุฌ Backend ุฅูู endpoints ุงูุชุงููุฉ:

### 1. ุฅุฏุงุฑุฉ ุงูุจูุชุงุช

```
GET    /api/telegram-bots              - ูุงุฆูุฉ ุงูุจูุชุงุช
POST   /api/telegram-bots              - ุฑุจุท ุจูุช ุฌุฏูุฏ
DELETE /api/telegram-bots/{id}         - ูุตู ุจูุช
```

### 2. ุงููุดุฑ ุนูู ุงูุชููุฌุฑุงู

```
POST   /api/telegram-bots/{id}/publish - ูุดุฑ ูุญุชูู
GET    /api/telegram-bots/{id}/channel/{username} - ูุนูููุงุช ุงูููุงุฉ
```

### ูุซุงู Response ูู publishToTelegram:

```json
{
  "success": true,
  "message": "Published successfully",
  "data": {
    "message_id": 12345,
    "chat_id": "@my_channel",
    "date": "2025-01-21T10:30:00Z"
  }
}
```

---

## ุงูููุงุฆุฏ ูููุณุชุฎุฏู

### 1. ุฅุดุนุงุฑุงุช ููุฑูุฉ โก
- ูุนุฑู ุงููุณุชุฎุฏู ููุฑุงู ุฅุฐุง ูุฌุญ ุฃู ูุดู ุงููุดุฑ
- ูุง ุญุงุฌุฉ ููุชุญ ุงูุชุทุจูู ููุชุงุจุนุฉ ุงูุญุงูุฉ
- ุฅุดุนุงุฑุงุช ูุฑุชุจุฉ ูููุธูุฉ ูู ูุญุงุฏุซุฉ ูุงุญุฏุฉ

### 2. ุชูุงุฑูุฑ ุชููุงุฆูุฉ ๐
- ููุฎุต ูููู ุจุฃุฏุงุก ุงูููุดูุฑุงุช
- ููุฎุต ุฃุณุจูุนู ุดุงูู
- ูุง ุญุงุฌุฉ ููุฏุฎูู ูุดุงุดุฉ ุงูุชุญูููุงุช

### 3. ุงูุชููุฌุฑุงู ูููุตุฉ ูุดุฑ ๐ฑ
- ุฅุถุงูุฉ ุงูุชููุฌุฑุงู ูููุตุงุช ุงููุดุฑ ุงููุชุงุญุฉ
- ุงููุดุฑ ุนูู ุงููููุงุช ูุงููุฌููุนุงุช
- ูุตูู ุฃูุณุน ููุฌูููุฑ

### 4. ุณูููุฉ ุงููุตูู ๐
- ุงูุฅุดุนุงุฑุงุช ุชุตู ุนูู ุงููุงุชู ูุจุงุดุฑุฉ
- ูููู ูุฑุงุกุชูุง ูู ุงูุณุงุนุฉ ุงูุฐููุฉ
- ูุง ุชููุชู ุฃู ุชุญุฏูุซ ููู

---

## ุงูุฃูุงู ูุงูุฎุตูุตูุฉ ๐

- โ Bot Tokens ูุฎุฒูุฉ ุจุดูู ุขูู ูู Backend
- โ Chat IDs ูุญููุธุฉ ูุญููุงู ุนูู ุงูุฌูุงุฒ
- โ ูุง ูุชู ูุดุงุฑูุฉ ุจูุงูุงุชู ูุน ุฃุทุฑุงู ุซุงูุซุฉ
- โ ูููู ุชุนุทูู ุงูุฅุดุนุงุฑุงุช ูู ุฃู ููุช
- โ ูููู ูุตู ุงูุจูุช ููุงุฆูุงู

---

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ููู ุฃุญุตู ุนูู Bot Tokenุ
1. ุงูุชุญ ุชุทุจูู ุงูุชููุฌุฑุงู
2. ุงุจุญุซ ุนู @BotFather
3. ุฃุฑุณู `/newbot`
4. ุงุชุจุน ุงูุชุนูููุงุช
5. ุณุชุญุตู ุนูู Bot Token

### ููู ุฃุญุตู ุนูู Chat IDุ
1. ุงูุชุญ ุชุทุจูู ุงูุชููุฌุฑุงู
2. ุงุจุญุซ ุนู @userinfobot
3. ุงุถุบุท Start
4. ุณูุฑุณู ูู Chat ID ุงูุฎุงุต ุจู
5. ุงูุณุฎู ูุฃูุตูู ูู ุงูุชุทุจูู

### ููู ุฃุถูู ุงูุจูุช ููุดุฑู ูู ุงูููุงุฉุ
1. ุงูุชุญ ููุงุชู
2. ุฅุนุฏุงุฏุงุช ุงูููุงุฉ > Administrators
3. Add Admin
4. ุงุจุญุซ ุนู ุงูุจูุช ุจุงูู Username
5. ุงููุญู ุตูุงุญูุฉ Post Messages

---

## ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ุฃูุซุฑ ูู ุจูุชุ**
ุฌ: ูุนูุ ููููู ุฑุจุท ุนุฏุฉ ุจูุชุงุช ุญุณุจ ุจุงูุชู (Free: 0, Individual: 1, Business: 3)

**ุณ: ูู ุงูุฅุดุนุงุฑุงุช ูุฌุงููุฉุ**
ุฌ: ูุนูุ Telegram Bot API ูุฌุงูู ุชูุงูุงู ููุง ุญุฏูุฏ ูู

**ุณ: ูู ูููููู ุชุฎุตูุต ุงูุฅุดุนุงุฑุงุชุ**
ุฌ: ูุนูุ ููููู ุชูุนูู/ุชุนุทูู ูู ููุน ูู ุงูุฅุดุนุงุฑุงุช ูููุฑุฏุงู

**ุณ: ูุงุฐุง ูู ูู ูุตู ุงูุฅุดุนุงุฑุ**
ุฌ: ุชุฃูุฏ ูู:
- ุตุญุฉ Bot Token
- ุตุญุฉ Chat ID
- ุฃูู ุจุฏุฃุช ูุญุงุฏุซุฉ ูุน ุงูุจูุช (ุงุถุบุท Start)

**ุณ: ูู ูููู ุงููุดุฑ ุนูู ูุฌููุนุงุช ุฎุงุตุฉุ**
ุฌ: ูุนูุ ุฃุถู ุงูุจูุช ูููุฌููุนุฉ ูุงุฌุนูู ูุดุฑู

---

## ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ๐

### ููุฏ ุงูุชุทููุฑ:
- [ ] **ุจูุช ุฅุฏุงุฑุฉ ุชูุงุนูู** - ุฅุฏุงุฑุฉ ุงูุชุทุจูู ุนุจุฑ ุฃูุงูุฑ ุงูุชููุฌุฑุงู
- [ ] **ุฌุฏููุฉ ููุดูุฑุงุช** ุนุจุฑ ุงูุชููุฌุฑุงู
- [ ] **ุฑุฏูุฏ ุชููุงุฆูุฉ** ุนูู ุงูุฑุณุงุฆู
- [ ] **ุชุญูููุงุช ูุชูุฏูุฉ** ูู ุงูุชููุฌุฑุงู
- [ ] **Webhooks** ููุชุญุฏูุซุงุช ุงูููุฑูุฉ

---

ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ Claude Code ๐ค
ุงูุชุงุฑูุฎ: 2025-01-21
