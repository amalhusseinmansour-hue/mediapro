# ูุธุงู ุทูุจุงุช ุดุญู ุงููุญูุธุฉ

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุงูู ูุทูุจุงุช ุดุญู ุงููุญูุธุฉ ูุน ููุงููุฉ ุงูุฃุฏููุ ูุณูุญ ูููุณุชุฎุฏููู ุจุชุญููู ุงููุจูุบ ูุฑูุน ุฅูุตุงู ุงูุฏูุนุ ุซู ุงูุชุธุงุฑ ููุงููุฉ ุงูุฅุฏุงุฑุฉ ูุฅุถุงูุฉ ุงููุจูุบ ุฅูู ุงููุญูุธุฉ.

---

## ุงูููููุงุช ุงูุชู ุชู ุฅุถุงูุชูุง

### Backend (Laravel)

#### 1. Model
- `app/Models/WalletRechargeRequest.php`
  - ูููุฐุฌ ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุดุญู
  - ุญุงูุงุช ุงูุทูุจ: pending, approved, rejected
  - ุฏูุงู ููููุงููุฉ/ุงูุฑูุถ ูุน ุฅุถุงูุฉ ุงููุจูุบ ุชููุงุฆูุงู ูููุญูุธุฉ

#### 2. Migration
- `database/migrations/2025_11_10_000001_create_wallet_recharge_requests_table.php`
- `database/migrations/WALLET_RECHARGE_MIGRATION.sql` (ููุชูููุฐ ุนูู ุงูุณูุฑูุฑ)

**ุงูุฌุฏูู ูุญุชูู ุนูู:**
- ูุนูููุงุช ุงููุณุชุฎุฏู ูุงููุจูุบ
- ุตูุฑุฉ ุงูุฅูุตุงู
- ุทุฑููุฉ ุงูุฏูุน ูุงุณู ุงูุจูู
- ุญุงูุฉ ุงูุทูุจ ูููุงุญุธุงุช ุงูุฅุฏุงุฑุฉ

#### 3. Controller
- `app/Http/Controllers/Api/WalletRechargeRequestController.php`

**Endpoints:**
```
POST   /api/wallet-recharge-requests              - ุฅุฑุณุงู ุทูุจ ุฌุฏูุฏ
GET    /api/wallet-recharge-requests/user/{userId} - ุฌูุจ ุทูุจุงุช ุงููุณุชุฎุฏู
GET    /api/wallet-recharge-requests/{id}          - ุชูุงุตูู ุทูุจ ูุนูู
GET    /api/wallet-recharge-requests               - ุฌููุน ุงูุทูุจุงุช (Admin)
POST   /api/wallet-recharge-requests/{id}/approve  - ูุจูู ุงูุทูุจ (Admin)
POST   /api/wallet-recharge-requests/{id}/reject   - ุฑูุถ ุงูุทูุจ (Admin)
GET    /api/wallet-recharge-requests/statistics/all - ุฅุญุตุงุฆูุงุช (Admin)
```

#### 4. Filament Resource (ููุญุฉ ุงูุชุญูู)
- `app/Filament/Resources/WalletRechargeRequestResource.php`
- `app/Filament/Resources/WalletRechargeRequestResource/Pages/ListWalletRechargeRequests.php`
- `app/Filament/Resources/WalletRechargeRequestResource/Pages/ViewWalletRechargeRequest.php`

**ุงููููุฒุงุช:**
- ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ูุน tabs (ุงูููุ ููุฏ ุงูุงูุชุธุงุฑุ ุงูููุจููุฉุ ุงููุฑููุถุฉ)
- ุนุฑุถ ุตูุฑุฉ ุงูุฅูุตุงู
- ููุงููุฉ/ุฑูุถ ูุน ุฅุถุงูุฉ ููุงุญุธุงุช
- Badge ุชุธูุฑ ุนุฏุฏ ุงูุทูุจุงุช ุงููุนููุฉ

### Frontend (Flutter)

#### 1. Models
- `lib/models/wallet_recharge_request.dart`
  - ูููุฐุฌ ุงูุจูุงูุงุช ููุทูุจุงุช

#### 2. Services
- `lib/services/wallet_recharge_service.dart`
  - ุฅุฑุณุงู ุงูุทูุจุงุช ูุน ุฑูุน ุงูุตูุฑ
  - ุฌูุจ ุทูุจุงุช ุงููุณุชุฎุฏู
  - ุฅุฏุงุฑุฉ ุญุงูุงุช ุงูุทูุจุงุช

#### 3. Screens
- `lib/screens/wallet/submit_recharge_request_screen.dart`
  - ุดุงุดุฉ ุฑูุน ุทูุจ ุดุญู ุฌุฏูุฏ
  - ุงุฎุชูุงุฑ ุตูุฑุฉ ูู ุงููุงููุฑุง ุฃู ุงููุนุฑุถ
  - ุญููู: ุงููุจูุบุ ุทุฑููุฉ ุงูุฏูุนุ ุงูุจููุ ุฑูู ุงููุฑุฌุนุ ููุงุญุธุงุช

- `lib/screens/wallet/recharge_requests_screen.dart`
  - ุนุฑุถ ุฌููุน ุทูุจุงุช ุงููุณุชุฎุฏู
  - tabs (ุงูููุ ููุฏ ุงูุงูุชุธุงุฑุ ุงูููุจููุฉุ ุงููุฑููุถุฉ)
  - ุนุฑุถ ุชูุงุตูู ูู ุทูุจ
  - ุฅููุงููุฉ ุนุฑุถ ุตูุฑุฉ ุงูุฅูุตุงู

- `lib/screens/wallet/wallet_screen.dart` (ูุนุฏูุฉ)
  - ุฅุถุงูุฉ ุฃุฒุฑุงุฑ:
    - "ุทูุจ ุดุญู": ูุชุญ ุดุงุดุฉ ุงูุทูุจ
    - "ุทูุจุงุชู": ุนุฑุถ ุญุงูุฉ ุงูุทูุจุงุช

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู:

1. **ุฅุฑุณุงู ุทูุจ ุดุญู:**
   - ุงูุชุญ ุดุงุดุฉ ุงููุญูุธุฉ
   - ุงุถุบุท ุนูู ุฒุฑ "ุทูุจ ุดุญู"
   - ุฃุฏุฎู ุงููุจูุบ ุงููุทููุจ
   - ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน ูุงุณู ุงูุจูู (ุงุฎุชูุงุฑู)
   - ุงูุชูุท ุตูุฑุฉ ุงูุฅูุตุงู ุฃู ุงุฎุชุฑ ูู ุงููุนุฑุถ
   - ุฃุถู ุฃู ููุงุญุธุงุช (ุงุฎุชูุงุฑู)
   - ุงุถุบุท "ุฅุฑุณุงู ุงูุทูุจ"

2. **ูุชุงุจุนุฉ ุงูุทูุจุงุช:**
   - ูู ุดุงุดุฉ ุงููุญูุธุฉุ ุงุถุบุท ุนูู "ุทูุจุงุชู"
   - ุดุงูุฏ ุญุงูุฉ ุฌููุน ุทูุจุงุชู
   - ุงูุฑุฃ ููุงุญุธุงุช ุงูุฅุฏุงุฑุฉ ูู ุญุงู ุงูููุงููุฉ/ุงูุฑูุถ

### ููุฃุฏูู:

1. **ูู ููุญุฉ ุงูุชุญูู Filament:**
   - ุงุฏุฎู ุนูู ูุงุฆูุฉ "ุงููุญูุธุฉ ูุงููุฏููุนุงุช" โ "ุทูุจุงุช ุดุญู ุงููุญูุธุฉ"
   - ุณุชุธูุฑ badge ุชุนุฑุถ ุนุฏุฏ ุงูุทูุจุงุช ุงููุนููุฉ
   - ุงุฎุชุฑ ุงูุทูุจ ูููุฑุงุฌุนุฉ
   - ุดุงูุฏ ุตูุฑุฉ ุงูุฅูุตุงู
   - ุงุถุบุท "ูุจูู" ุฃู "ุฑูุถ"
   - ุฃุถู ููุงุญุธุงุช ูููุณุชุฎุฏู (ุงุฎุชูุงุฑู)

2. **ุนูุฏ ูุจูู ุงูุทูุจ:**
   - ูุชู ุชููุงุฆูุงู:
     - ุชุบููุฑ ุญุงูุฉ ุงูุทูุจ ุฅูู "ููุจูู"
     - ุฅุถุงูุฉ ุงููุจูุบ ููุญูุธุฉ ุงููุณุชุฎุฏู
     - ุฅูุดุงุก transaction ูู ุณุฌู ุงููุญูุธุฉ
     - ุชุณุฌูู ูู ูุงู ุจุงูููุงููุฉ ูููุช ุงููุนุงูุฌุฉ

---

## ุชุดุบูู ุงูููุฌุฑูุดู

### ุนูู ุงูุณูุฑูุฑ:
```bash
# ููุฐ ููู SQL ูุจุงุดุฑุฉ
mysql -u username -p database_name < backend/database/migrations/WALLET_RECHARGE_MIGRATION.sql

# ุฃู ูู ุฏุงุฎู phpMyAdmin ุฃู ุฃู ุฃุฏุงุฉ ุฅุฏุงุฑุฉ ููุงุนุฏ ุจูุงูุงุช
```

### ุนูู ุงูู Local:
```bash
cd backend
php artisan migrate
```

---

## API Examples

### 1. ุฅุฑุณุงู ุทูุจ ุดุญู
```bash
POST /api/wallet-recharge-requests
Content-Type: multipart/form-data

{
  "user_id": "user123",
  "amount": 500.00,
  "currency": "SAR",
  "receipt_image": [FILE],
  "payment_method": "ุชุญููู ุจููู",
  "bank_name": "ุงูุจูู ุงูุฃููู",
  "transaction_reference": "TRX123456",
  "notes": "ุชุญููู ูู ุญุณุงุจู ุงูุดุฎุตู"
}
```

### 2. ุฌูุจ ุทูุจุงุช ุงููุณุชุฎุฏู
```bash
GET /api/wallet-recharge-requests/user/{userId}?status=pending
```

### 3. ููุงููุฉ ุนูู ุทูุจ (Admin)
```bash
POST /api/wallet-recharge-requests/{id}/approve

{
  "admin_id": "admin123",
  "admin_notes": "ุชู ุงูุชุญูู ูู ุงูุฅูุตุงู ูุงูููุงููุฉ ุนูู ุงูุทูุจ"
}
```

---

## ุงูุญุงูุงุช ุงููุฎุชููุฉ

### Pending (ููุฏ ุงูุงูุชุธุงุฑ)
- ุงูููู: ุฃุตูุฑ/ุฐูุจู
- ุงูุฑูุฒ: โฑ๏ธ
- ุชุธูุฑ ููุทูุจุงุช ุงูุฌุฏูุฏุฉ ุงูุชู ุชูุชุธุฑ ุงููุฑุงุฌุนุฉ

### Approved (ููุจูู)
- ุงูููู: ุฃุฎุถุฑ
- ุงูุฑูุฒ: โ
- ุงููุจูุบ ุชูุช ุฅุถุงูุชู ูููุญูุธุฉ

### Rejected (ูุฑููุถ)
- ุงูููู: ุฃุญูุฑ
- ุงูุฑูุฒ: โ
- ุงูุทูุจ ูุฑููุถ ูุน ุณุจุจ ุงูุฑูุถ ูู ุงูููุงุญุธุงุช

---

## ุงูุฃูุงู
- ุฌููุน ุงูุตูุฑ ุชูุฎุฒู ูู ูุฌูุฏ `storage/wallet_receipts`
- ูุฌุจ ุฃู ูููู ุงููุฌูุฏ ูุงุจู ูููุชุงุจุฉ
- ุงูุตูุฑ ูุญููุฉ ุนุจุฑ Laravel Storage
- ููุท ุงููุณุชุฎุฏููู ุงููุตุฑุญ ููู ูููููู ุงููุตูู

---

## ุงูููุงุญุธุงุช ุงููุงูุฉ

1. **ุญุฌู ุงูุตูุฑ:** ุงูุญุฏ ุงูุฃูุตู 5MB
2. **ุฃููุงุน ุงููููุงุช ุงููุณููุญุฉ:** JPG, JPEG, PNG, PDF
3. **ุงูุทูุจุงุช ุงููุนููุฉ:** ูููู ูููุณุชุฎุฏู ุฑุคูุฉ ุนุฏุฏ ุงูุทูุจุงุช ุงููุนููุฉ
4. **ุงูุฅุดุนุงุฑุงุช:** ูููุตุญ ุจุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช ุนูุฏ ุงูููุงููุฉ/ุงูุฑูุถ (ูุณุชูุจูุงู)

---

## ุงูุชูุณุนุงุช ุงููุณุชูุจููุฉ

- [ ] ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช Push ุนูุฏ ุงูููุงููุฉ/ุงูุฑูุถ
- [ ] ุฅุถุงูุฉ Email notification ูููุณุชุฎุฏู
- [ ] ุฅุถุงูุฉ ุชูุฑูุฑ ุฅุญุตุงุฆู ููุทูุจุงุช
- [ ] ุฅุถุงูุฉ ุชุตุฏูุฑ Excel ููุทูุจุงุช
- [ ] ุฅุถุงูุฉ ููุชุฑ ุจุญุซ ูุชูุฏู
- [ ] ุฅุถุงูุฉ ุฅููุงููุฉ ุฑูุน ุนุฏุฉ ุตูุฑ ููุฅูุตุงู

---

## ุงูุฏุนู ุงูููู

ูู ุญุงู ูุฌูุฏ ุฃู ูุดููุฉ:
1. ุชุฃูุฏ ูู ุชุดุบูู Migration ุจูุฌุงุญ
2. ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏ storage/app/public/wallet_receipts
3. ุชุฃูุฏ ูู ุตูุงุญูุงุช ุงููุชุงุจุฉ ุนูู ุงููุฌูุฏ
4. ุชุฃูุฏ ูู ุชููุฆุฉ WalletRechargeService ูู main.dart

---

## ุงูุฎูุงุตุฉ

ุชู ุจูุงุก ูุธุงู ูุชูุงูู ูุทูุจุงุช ุดุญู ุงููุญูุธุฉ ูุณูุญ ุจู:
โ ุฑูุน ุงูุฅูุตุงูุงุช ูู ุงููุณุชุฎุฏููู
โ ูุฑุงุฌุนุฉ ููุงููุฉ/ุฑูุถ ูู ุงูุฃุฏูู
โ ุฅุถุงูุฉ ุชููุงุฆูุฉ ูููุจูุบ ุนูุฏ ุงูููุงููุฉ
โ ุชุชุจุน ุญุงูุฉ ุงูุทูุจุงุช
โ ูุงุฌูุฉ ุณููุฉ ูููุณุชุฎุฏู ูุงูุฃุฏูู

ุฌููุน ุงููููุงุช ุฌุงูุฒุฉ ูุงููุธุงู ูุนูู ุจุดูู ูุงูู! ๐
