# ๐งช ุฏููู ุงุฎุชุจุงุฑ ูุธุงู ุงูุฏูุน - ุนููู ุดุงูู

## โ ุงูุญุงูุฉ ุงูุญุงููุฉ

| ุงููููู | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|------|--------|---------|
| API Key Paymob | โ ูุญุฏูุซ | ุชู ุงุณุชุจุฏุงู ุงูููุชุงุญ ุงููุฏูู |
| PaymobService | โ ุฌุงูุฒ | ุจุฏูู ุชุบููุฑุงุช ูุทููุจุฉ |
| SubscriptionScreen | โ ุฌุงูุฒ | ูุนุฏ ููุงุฎุชุจุงุฑ |
| PaymentScreen | โ ุฌุงูุฒ | WebView ุฌุงูุฒ |
| Database | โ ูุชุตู | Remote Server 82.25.83.217 |

---

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงููุนูู

### ุงููุฑุญูุฉ 1๏ธโฃ: ุชุญุถูุฑ ุงูุจูุฆุฉ

#### ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ุงูุญุฒู
```bash
cd c:\Users\HP\social_media_manager
flutter pub get
flutter pub upgrade
```

#### ุงูุฎุทูุฉ 2: ุชูุธูู ุงููููุงุช ุงููุฑุญููุฉ
```bash
flutter clean
```

#### ุงูุฎุทูุฉ 3: ูุญุต ุงูุชุฌููุน
```bash
flutter analyze
# ูุฌุจ ุฃูุง ูููู ููุงู ุฃุฎุทุงุก ูุงุฏุญุฉ
```

---

### ุงููุฑุญูุฉ 2๏ธโฃ: ุงูุชุดุบูู ุงูุฃููู

#### ุงูุฎุทูุฉ 4: ุชุดุบูู ุงูุชุทุจูู
```bash
# ุงูุฎูุงุฑ A: ุนูู ุฌูุงุฒ ุญูููู
flutter run

# ุงูุฎูุงุฑ B: ุนูู ูุญุงูู
flutter run -d emulator-5554

# ุงูุฎูุงุฑ C: ูุน ุชุชุจุน ุชูุงุตููู (ููุชุดุฎูุต)
flutter run -v
```

#### ุงูุฎุทูุฉ 5: ุงูุชุธุฑ ุญุชู ูุชุญูู ุงูุชุทุจูู ุจุงููุงูู
- ุงูุชุธุฑ ุธููุฑ ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
- ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู Console
- ูุงุญุธ ุงูุฑุณุงุฆู ุงููุชุนููุฉ ุจู Firebase ู Authentication

---

### ุงููุฑุญูุฉ 3๏ธโฃ: ุงูุชููู ุฅูู ุดุงุดุฉ ุงูุงุดุชุฑุงูุงุช

#### ุงูุฎุทูุฉ 6: ุงูุชูู ุฅูู ุตูุญุฉ ุงูุงุดุชุฑุงูุงุช
```
1. ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
2. ุงุจุญุซ ุนู "ุงูุงุดุชุฑุงูุงุช" ุฃู "Subscription" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
3. ุฃู ุงุถุบุท ุนูู ุงูุฑุงุจุท ุงููุจุงุดุฑ ุฅูู SubscriptionScreen
```

**ุงููุงุฌูุฉ ุงููุชููุนุฉ**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ุฎุทุท ุงูุงุดุชุฑุงู              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                 โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ โญ ุฎุทุฉ ูุฌุงููุฉ             โ โ
โ โ โข 5 ููุดูุฑุงุช ุดูุฑููุง          โ โ
โ โ โข ููุตุฉ ูุงุญุฏุฉ               โ โ
โ โ [ุชุฑููุฉ]                    โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                 โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ๐ฅ ุฎุทุฉ ุงููุถุฉ              โ โ
โ โ โข 50 ููุดูุฑ ุดูุฑููุง          โ โ
โ โ โข 5 ููุตุงุช                  โ โ
โ โ SAR 99/ุดูุฑ                  โ โ
โ โ [ุงุดุชุฑู ุงูุขู]               โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                 โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ๐ฅ ุฎุทุฉ ุงูุฐูุจ              โ โ
โ โ โข ููุดูุฑุงุช ุบูุฑ ูุญุฏูุฏุฉ       โ โ
โ โ โข ุฌููุน ุงูููุตุงุช             โ โ
โ โ SAR 299/ุดูุฑ                 โ โ
โ โ [ุงุดุชุฑู ุงูุขู]               โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### ุงููุฑุญูุฉ 4๏ธโฃ: ุงุฎุชุจุงุฑ ุนูููุฉ ุงูุฏูุน

#### ุงูุฎุทูุฉ 7: ุงุฎุชุฑ ุฎุทุฉ ูุงุดุชุฑู
```
1. ุงุถุบุท ุนูู ุงูุฎุทุฉ ุงูุชู ุชุฑูุฏูุง (ูุซู: ุฎุทุฉ ุงููุถุฉ)
2. ุณูุธูุฑ ุฒุฑ "ุงุดุชุฑู ุงูุขู" ุฃู "Subscribe"
3. ุงุถุบุท ุนููู
```

#### ุงูุฎุทูุฉ 8: ูุฑุงูุจุฉ Console ููุฑุณุงุฆู ุงูุชุดุฎูุตูุฉ

**ุงูุฑุณุงุฆู ุงููุชููุนุฉ ุงููุงุฌุญุฉ** โ:
```
I/Paymob: Initiating payment...
I/Paymob: Getting auth token...
I/Paymob: Auth token received: ZXlK...
I/Paymob: Registering order...
I/Paymob: Order registered successfully
I/Paymob: Getting payment key...
I/Paymob: Payment key generated: zzz...
I/Paymob: Opening payment page in WebView
```

**ุงูุฑุณุงุฆู ุงูุชู ุชุดูุฑ ุฅูู ูุดุงูู** โ:
```
E/Paymob: 403 Forbidden
E/Paymob: incorrect credentials
E/Paymob: Invalid API Key
```

---

### ุงููุฑุญูุฉ 5๏ธโฃ: ุฅููุงู ุนูููุฉ ุงูุฏูุน

#### ุงูุฎุทูุฉ 9: ููุก ูููุฐุฌ ุงูุฏูุน

**ูู WebView ุณุชุดุงูุฏ**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Paymob Payment Gateway          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                  โ
โ ุงููุจูุบ: SAR 99.00                โ
โ                                  โ
โ ุจูุงูุงุช ุงูุจุทุงูุฉ:                   โ
โ [__________________]             โ
โ ุฑูู ุงูุจุทุงูุฉ                       โ
โ                                  โ
โ [____] [____]                    โ
โ MMM    YY                        โ
โ                                  โ
โ [____]                           โ
โ CVV                              โ
โ                                  โ
โ [ุงูุฏูุน ุงูุขู]                      โ
โ                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงูุฎุทูุฉ 10: ุงุฎุชุจุฑ ุจู Paymob Test Card

ุฅุฐุง ููุช ูู **Test Mode**:
```
ุจุทุงูุฉ ุงุฎุชุจุงุฑ:
- ุฑูู: 4111111111111111
- ุงูุดูุฑ: 12
- ุงูุณูุฉ: 25
- CVV: 123
```

ุฅุฐุง ููุช ูู **Live Mode**:
```
ุงุณุชุฎุฏู ุจุทุงูุฉ ุญููููุฉ
ุฃู ุงุฎุชุจุฑ ูุน ุนูููุฉ ุฏูุน ุญููููุฉ ุตุบูุฑุฉ
```

---

### ุงููุฑุญูุฉ 6๏ธโฃ: ุงูุชุญูู ูู ุงููุชูุฌุฉ

#### ุงูุฎุทูุฉ 11: ุจุนุฏ ุงูุฏูุน

**ุงูุณููุงุฑูู ุงููุงุฌุญ** โ:
```
1. ุณุชูุบูู ุตูุญุฉ ุงูุฏูุน ุชููุงุฆููุง
2. ุณุชุดุงูุฏ ุฑุณุงูุฉ: "ุชู ุงูุฏูุน ุจูุฌุงุญ" โ
3. ูู Firebase Firestore ุณุชุฌุฏ:
   - ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู ุฅูู ูุดุชุฑู
   - ุชุณุฌูู ุงููุนุงููุฉ

4. ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Laravel):
   - ุฌุฏูู subscriptions ุณูุญุชูู ุนูู ุณุฌู ุฌุฏูุฏ
   - ุญูู status = 'active'
```

**ุงูุณููุงุฑูู ุงููุงุดู** โ:
```
1. ุฑุณุงูุฉ ุฎุทุฃ ูู Paymob
2. ุชุญูู ูู Console ููุฃุฎุทุงุก
3. ูุฌุจ ุฑุคูุฉ:
   - ุฑูุฒ ุงูุฎุทุฃ
   - ุงูุฑุณุงูุฉ ุงูุชูุถูุญูุฉ
```

---

## ๐ ุงููุฑุงูุจุฉ ุงููุชูุฏูุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช MySQL

#### ุชุญูู ูู ุชุณุฌูู ุงูุงุดุชุฑุงู:
```sql
-- ูู ุฎุงุฏู MySQL (82.25.83.217)
SELECT * FROM subscriptions 
WHERE user_id = YOUR_USER_ID 
ORDER BY created_at DESC 
LIMIT 5;

-- ูุฌุจ ุฃู ุชุดุงูุฏ:
-- id | user_id | plan_id | status | created_at
-- 1  | 123     | 2       | active | 2025-11-19 ...
```

#### ุชุญูู ูู ุงููุนุงููุงุช:
```sql
SELECT * FROM transactions 
WHERE user_id = YOUR_USER_ID 
AND type = 'subscription'
ORDER BY created_at DESC 
LIMIT 5;
```

### Firebase Firestore

#### ุชุญูู ูู ุจูุงูุงุช ุงููุณุชุฎุฏู:
```
Collections:
โโโ users
โ   โโโ [USER_ID]
โ       โโโ subscription: {
โ       โ   "plan": "silver",
โ       โ   "status": "active",
โ       โ   "expiresAt": Timestamp,
โ       โ   "renewalDate": Timestamp
โ       โ }
โ       โโโ payments: [
โ       โ   {
โ       โ     "amount": 99,
โ       โ     "currency": "SAR",
โ       โ     "status": "completed",
โ       โ     "paymobRef": "...",
โ       โ     "date": Timestamp
โ       โ   }
โ       โ ]
```

---

## ๐ ุฌุฏูู ุงูุงุฎุชุจุงุฑุงุช

| # | ุงูุงุฎุชุจุงุฑ | ุงูุฎุทูุงุช | ุงููุชูุฌุฉ ุงููุชููุนุฉ | ุงูุญุงูุฉ |
|---|---------|--------|-----------------|--------|
| 1 | ุชุญููู ุงูุชุทุจูู | `flutter run` | ุจุฏูู ุฃุฎุทุงุก | โณ |
| 2 | ุงูููุงุญุฉ | ุงูุชุญ Subscriptions | 3 ุฎุทุท ูุฑุฆูุฉ | โณ |
| 3 | ุงุฎุชุฑ ุฎุทุฉ | ุงููุฑ ุนูู Silver | ูููุฐุฌ ุงูุฏูุน | โณ |
| 4 | ุงูุฏูุน | ููุก ุงูุจูุงูุงุช | ุฑุณุงูุฉ ุงููุฌุงุญ | โณ |
| 5 | ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุชุญูู MySQL | ุณุฌู ุฌุฏูุฏ | โณ |
| 6 | Firestore | ุชุญูู Firebase | ุชุญุฏูุซ ุงููุณุชุฎุฏู | โณ |

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฎุทุฃ: "403 Forbidden"

**ุงูุณุจุจ**: API Key ุบูุฑ ุตุญูุญ  
**ุงูุญู**:
```dart
// ูู api_config.dart
// ุชุฃูุฏ ูู ุฃู paymobApiKey ูุง ูุณุงูู "YOUR_..." ุฃู ูููุฉ ูุฏููุฉ

// ูุฌุจ ุฃู ูุจุฏุฃ ุจู:
// ZXlKaGJHY2lPaUpJ...
```

### ุงูุฎุทุฃ: "WebView ูุง ููุชุญ"

**ุงูุณุจุจ**: ูุดููุฉ ูู ุฌูู Payment Key  
**ุงูุญู**:
```bash
# ุชุญูู ูู Console:
flutter run -v | grep -i "payment\|paymob\|error"
```

### ุงูุฎุทุฃ: "ุงูุฏูุน ูุงุฌุญ ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุชูุญุฏูุซ"

**ุงูุณุจุจ**: ูุดููุฉ ูู Callback Handler  
**ุงูุญู**:
```dart
// ูู paymob_service.dart
// ุชุญูู ูู handlePaymentCallback()
// ูุชุฃูุฏ ูู ุฃููุง ุชุณุชุฏุนู API ุงูุฎููู ุจุดูู ุตุญูุญ
```

---

## ๐ฑ ููุงุญุธุงุช ูููุฉ

โ **ูุจู ุงูุงุฎุชุจุงุฑ ุงููุนูู**:
- [ ] ุชุฃูุฏ ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
- [ ] ุชุญูู ูู ุฃู ุงูููุชุงุญ ูุญุฏูุซ
- [ ] ุชุฌูุจ ุงูุถุบุท ุงููุชูุฑุฑ ุนูู ุงูุฒุฑ

โ๏ธ **ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ**:
- ูุง ุชุบูู ุงูุชุทุจูู ุฃุซูุงุก ุงูุฏูุน
- ูุง ุชุถุบุท ุงูุฒุฑ ุฃูุซุฑ ูู ูุฑุฉ
- ุงูุชุธุฑ ุงูุฑุณุงุฆู ูู Console

๐ **ุจุฎุตูุต ุงูุฃูุงู**:
- ูุง ุชุญูุธ ุจูุงูุงุช ุงูุจุทุงูุฉ ูู ุงูููุฏ
- ุงุณุชุฎุฏู HTTPS ููุท
- ูุซู ุงููุนุงููุงุช ุจุดูู ุขูู

---

## ๐ ูุซุงู ูุงูู ููุงุฎุชุจุงุฑ

```bash
# 1. ุงูุชุญุถูุฑ
cd c:\Users\HP\social_media_manager
flutter clean
flutter pub get

# 2. ุงูุชุดุบูู ูุน ุงูุชุชุจุน
flutter run -v

# 3. ูู ุงูุฌูุงุฒ:
# - ุชุณุฌูู ุงูุฏุฎูู
# - ุงูุชูู ุฅูู Subscriptions
# - ุงุฎุชุฑ Silver Plan (SAR 99)
# - ุงุถุบุท "ุงุดุชุฑู ุงูุขู"
# - ููุก ุจูุงูุงุช ุงูุจุทุงูุฉ (ุงุฎุชุจุงุฑ ุฃู ุญูููู)
# - ุชุญูู ูู ุฑุณุงูุฉ ุงููุฌุงุญ

# 4. ุงูุชุญูู ูู ุงูุจูุงูุงุช
# - ูุงุนุฏุฉ MySQL
# - Firebase Firestore
# - Console ูู Flutter
```

---

## โ ุฅุฐุง ูู ุดูุก ูุฌุญ

```
๐ ุชู ุฅููุงู ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ!

โ API Key ูุนูู ุจุดูู ุตุญูุญ
โ WebView ููุชุญ ุตูุญุฉ ุงูุฏูุน
โ ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ ูุธุงู ุงูุฏูุน ุฌุงูุฒ ููุฅูุชุงุฌ
```

---

**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุงุฎุชุจุงุฑ  
**ุขุฎุฑ ุชุญุฏูุซ**: 19 ููููุจุฑ 2025  
**ุงููููุงุช ุงูููุนุฏููุฉ**: `lib/core/config/api_config.dart`
